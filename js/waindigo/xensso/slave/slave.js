var XenSSO_Slave=new function(){var e=this;this.init=function(){e.attemptLogin();e.forwardSession()};this.attemptLogin=function(){if(typeof xensso_attempt_login==="undefined"){return}var t=encodeURIComponent($("base").attr("href")+"index.php?sync-slave/jsCallback&data=");e.loadUrl(xensso_master_url+"index.php?sync/myIdentity&redirect= "+t,function(t){e.loadUrl($("base").attr("href")+"index.php?sso-slave/login&openid_identity="+encodeURIComponent(t),function(){window.location.reload()})})};this.forwardSession=function(){if(typeof xensso_auth_data==="undefined"){return}var t=$("base").attr("href")+"sync-slave/keySuccess";e.loadUrl(xensso_master_url+"index.php?sync/key&authData="+encodeURIComponent(xensso_auth_data)+"&redirect="+encodeURIComponent(t))};this.loadUrl=function(e,t){$("#xensso_frame").remove();var n=$("<iframe>");n.attr("id","xensso_frame");n.css({width:1,height:1});n.attr("src",e);n.appendTo("body");setTimeout(n.hide,100);n.load(function(){if(typeof t!="undefined"){t($(this).contents().find("body").text())}})};$(document).ready(this.init)}